<div class="register-container">
  <button mat-button color="primary" (click)="backToHomepage()" class="back-button">
    <mat-icon>arrow_back</mat-icon>
    Back to Homepage
  </button>
  <h1>Register User</h1>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="form-container">
    <!-- Username, Password, and Confirm Password -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Username</mat-label>
        <input matInput id="username" formControlName="username" />
        <mat-error *ngIf="userForm.get('username')?.hasError('required')">
          Username is required
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Password</mat-label>
        <input matInput id="password" type="password" formControlName="password" />
        <mat-error *ngIf="userForm.get('password')?.hasError('required')">
          Password is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Confirm Password</mat-label>
        <input matInput id="confirmPassword" type="password" formControlName="confirmPassword" />
        <mat-error *ngIf="userForm.get('confirmPassword')?.hasError('required')">
          Confirm Password is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- First Name and Last Name -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>First Name</mat-label>
        <input matInput id="firstName" formControlName="firstName" />
        <mat-error *ngIf="userForm.get('firstName')?.hasError('required')">
          First name is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Last Name</mat-label>
        <input matInput id="lastName" formControlName="lastName" />
        <mat-error *ngIf="userForm.get('lastName')?.hasError('required')">
          Last name is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Email and Phone Number -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Email</mat-label>
        <input matInput id="email" type="email" formControlName="email" />
        <mat-error *ngIf="userForm.get('email')?.hasError('required')">
          Email is required
        </mat-error>
        <mat-error *ngIf="userForm.get('email')?.hasError('email')">
          Invalid email format
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-group">
        <mat-label>Phone Number</mat-label>
        <input matInput id="phoneNumber" formControlName="phoneNumber" />
        <mat-error *ngIf="userForm.get('phoneNumber')?.hasError('required')">
          Phone number is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- User Role -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="form-group">
        <mat-label>User Role</mat-label>
        <mat-select id="role" formControlName="role">
          <mat-option [value]="UserRole.None" disabled>Select Role</mat-option>
          <mat-option [value]="UserRole.Patient">Patient</mat-option>
          <mat-option [value]="UserRole.Doctor">Doctor</mat-option>
        </mat-select>
        <mat-error *ngIf="userForm.get('role')?.hasError('required')">
          User role is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Patient-Specific Fields -->
    <div *ngIf="userForm.get('role')?.value === UserRole.Patient">
      <h3>Patient Information</h3>
      <div class="form-row">
        <!-- Date of Birth -->
        <div class="form-group">
          <label for="dateOfBirth" class="form-label">Date of Birth</label>
          <input
            id="dateOfBirth"
            type="date"
            formControlName="dateOfBirth"
            class="custom-input"
          />
          <div *ngIf="userForm.get('dateOfBirth')?.hasError('required')" class="error">
            Date of Birth is required
          </div>
        </div>

        <mat-form-field appearance="outline" class="form-group">
          <mat-label>Gender</mat-label>
          <input matInput id="gender" formControlName="gender" />
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-group">
          <mat-label>Address</mat-label>
          <input matInput id="address" formControlName="address" />
        </mat-form-field>
      </div>
    </div>

    <!-- Doctor-Specific Fields -->
    <div *ngIf="userForm.get('role')?.value === UserRole.Doctor">
      <h3>Doctor Information</h3>
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-group">
          <mat-label>Specialization</mat-label>
          <input matInput id="specialization" formControlName="specialization" />
        </mat-form-field>
      </div>
    </div>

    <!-- Submit Button -->
    <button mat-raised-button color="primary" type="submit" class="submit-button">
      Register User
    </button>
  </form>

  <p class="login-redirect">
    Already have an account? <a mat-button color="accent" href="/login">Login here</a>
  </p>
</div>
